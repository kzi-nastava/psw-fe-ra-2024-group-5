<div class="container">
    <h1 class="title">Managing Tourism Encounters</h1>
  
    <div class="content">
      <div class="left-panel">
        <h3>Create New Encounter</h3>
        <div class="filter-container" style="text-align: center; margin: 10px 0;">
          <mat-form-field appearance="fill">
            <mat-label>Type</mat-label>
            <mat-select [(value)]="selectedEncounterType">
              <mat-option [value]="'MISC'">MISC</mat-option>
              <mat-option [value]="'SOCIAL'">SOCIAL</mat-option>
              <mat-option [value]="'HIDDEN LOCATION'">HIDDEN LOCATION</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <button (click)="openCreateEncounterModal ()">Create</button>
      </div>
  
      <div class="map-container" *ngIf="!miscModalVisible">            
        <app-map [isViewOnly]="true" [encounters] = "encountersByCreator"></app-map>
      </div>
    </div>

    <!-- modal za kreiranje encounter-a -->
    <form [formGroup]="encounterForm" class="modal-overlay" *ngIf="miscModalVisible" (ngSubmit)="createEncounter()">
      <div class="modal">
          <h2>Create Encounter</h2>
          <input type="text" formControlName="name" placeholder="Name"/>
          <div *ngIf="encounterForm.get('name')?.invalid" class="error-message">
            Name is required.
          </div>

          <textarea rows="4" formControlName="description" class="message-input" placeholder="Description"
           ></textarea>
           <div *ngIf="encounterForm.get('description')?.invalid" class="error-message">
            Description is required.
          </div>

          <input type="number" formControlName="xp" placeholder="Experience Points" />
          <div *ngIf="encounterForm.get('xp')?.invalid" class="error-message">
            Experience Points are required.
          </div>

          <input type="number" formControlName="longitude" placeholder="Longitude"/>
          <input type="number" formControlName="latitude" placeholder="Latitude"/>

          
          <!--<div class="modal-map-container">
            <app-map [isViewOnly]="false"></app-map>
          </div>  ova mapa nece da se prikaze zbog one gore -->

          <div class="modal-buttons">
              <button class="create-btn" [disabled]="encounterForm.invalid">Create</button>
              <button class="cancel-btn"
              (click)="cancelCreateEncounter()">Cancel</button>
          </div>
      </div>
    </form>
  </div>
  